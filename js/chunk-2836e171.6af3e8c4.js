(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2836e171"],{"1a50":function(t,e,n){"use strict";n("c6c9")},"8cf7":function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=this,n=e.$createElement,i=e._self._c||n;return i("page-header-wrapper",[i("a-card",{attrs:{bordered:!1}},[i("div",{staticClass:"table-operator"},[i("a-button",{attrs:{type:"primary",icon:"plus"},on:{click:function(){t.$router.push({name:"DeviceAdd"})}}},[e._v("新增")])],1),i("a-table",{attrs:{dataSource:e.tableData.list,loading:e.tableData.loading,columns:e.tableData.column,pagination:e.tableData.pagination,rowKey:function(t,e){return e}},scopedSlots:e._u([{key:"type",fn:function(t,n){return["打卡机"===n.type?i("span",[e._v("人脸识别终端")]):e._e(),"gps"===n.type?i("span",[e._v("移动通信定位终端")]):e._e()]}},{key:"online",fn:function(t,n){return[i("a-tag",{attrs:{color:1===n.online?"green":"red"}},[e._v(" "+e._s(1===n.online?"在线":"离线")+" ")])]}},{key:"action",fn:function(t,n){return[i("a-popconfirm",{attrs:{title:"确定要删除吗？","ok-text":"是","cancel-text":"否",visible:n.sn===e.visibleId&&e.deleteVisible,"ok-button-props":e.okButtonProps},on:{confirm:function(t){return e.handleDelete()},cancel:e.onDeleteCancel}},[i("a-icon",{style:{color:"#1890ff"},attrs:{type:"delete"},on:{click:function(t){return e.onDelete(n)}}})],1)]}}])})],1)],1)},a=[],o=n("aa98"),s={name:"List",data:function(){return{visible:!1,visibleId:void 0,deleteVisible:!1,okButtonProps:{props:{loading:!1}},tableData:{column:[{title:"设备编号",dataIndex:"sn"},{title:"设备类型",dataIndex:"type",scopedSlots:{customRender:"type"}},{title:"所属船只",dataIndex:"device_name"},{title:"备注",dataIndex:"remark"},{title:"是否在线(10s更新一次)",dataIndex:"online",scopedSlots:{customRender:"online"}},{title:"操作",dataIndex:"action",class:"action",align:"right",scopedSlots:{customRender:"action"}}],list:[],pagination:{current:1,pageSize:20,total:0},loading:!1},timerId:{}}},mounted:function(){this.getList(),this.timer()},methods:{getList:function(){var t=this;this.tableData.loading=!0,Object(o["d"])().then((function(e){t.tableData.loading=!1,t.tableData.list=e.data.list;var n=e.data.pagination;t.tableData.pagination={current:n.page,pageSize:n.limit,total:n.total}}))},onDelete:function(t){this.visibleId=t.sn,this.deleteVisible=!0},onDeleteCancel:function(){this.deleteVisible=!1},handleDelete:function(){var t=this;this.okButtonProps.props.loading=!0;var e={sn:this.visibleId};Object(o["b"])(e).then((function(e){e.status?t.$notification.error({message:e.msg}):(t.submit=!1,t.$notification.success({message:"删除成功"}),t.deleteVisible=!1,t.okButtonProps.props.loading=!1,t.getList())})).catch((function(){t.okButtonProps.props.loading=!1,t.deleteVisible=!1}))},timer:function(){var t=this;this.timerId=setInterval((function(){t.getList()}),1e4)}},beforeDestroy:function(){clearInterval(this.timerId)}},r=s,l=(n("1a50"),n("2877")),c=Object(l["a"])(r,i,a,!1,null,"30efe67c",null);e["default"]=c.exports},aa98:function(t,e,n){"use strict";n.d(e,"a",(function(){return o})),n.d(e,"d",(function(){return s})),n.d(e,"b",(function(){return r})),n.d(e,"c",(function(){return l}));var i=n("b775"),a={add:"/admin/device/add",list:"/admin/device/list",boatList:"/admin/device/boat_list",delete:"/admin/device/delete"};function o(t){return Object(i["b"])({url:a.add,method:"post",data:t})}function s(){return Object(i["b"])({url:a.list,method:"get"})}function r(t){return Object(i["b"])({url:a.delete,method:"post",data:t})}function l(t){return Object(i["b"])({url:a.boatList,method:"get",params:t})}},c6c9:function(t,e,n){}}]);