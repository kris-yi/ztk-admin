(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-441db839"],{"9b51":function(e,t,r){},a26d:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("page-header-wrapper",[r("a-card",{attrs:{bordered:!1}},[r("a-spin",{attrs:{spinning:e.loading}},[r("a-form-model",{ref:"insert",attrs:{model:e.insertForm,rules:e.insertFormRules},on:{submit:e.handleSubmit}},[e._l(e.form,(function(t,a){return r("a-form-model-item",{key:a,attrs:{label:t.label,labelCol:{lg:{span:4},sm:{span:7}},wrapperCol:{lg:{span:t.wrapperCol},sm:{span:10}},prop:t.prop}},["input"===t.type?r("a-input",{attrs:{name:t.prop,placeholder:"请输入"+t.label},model:{value:e.insertForm[t.prop],callback:function(r){e.$set(e.insertForm,t.prop,r)},expression:"insertForm[item.prop]"}}):e._e(),"radio"===t.type?r("a-radio-group",{model:{value:e.insertForm[t.prop],callback:function(r){e.$set(e.insertForm,t.prop,r)},expression:"insertForm[item.prop]"}},e._l(t.option,(function(t,a){return r("a-radio-button",{key:a,attrs:{value:t.key}},[e._v(" "+e._s(t.value)+" ")])})),1):e._e(),"upload"===t.type?r("a-upload",{staticClass:"avatar-uploader",attrs:{name:"file","list-type":"picture-card","show-upload-list":!1,customRequest:e.customRequest}},[e.imageUrl?r("img",{attrs:{src:e.imageUrl,alt:"avatar",width:"200"}}):r("div",[r("a-icon",{attrs:{type:e.imgLoading?"loading":"plus"}}),r("div",{staticClass:"ant-upload-text"},[e._v(" Upload ")])],1)]):e._e()],1)})),r("a-form-model-item",{staticStyle:{"text-align":"center"},attrs:{"wrapper-col":{span:24}}},[r("a-button",{attrs:{type:"primary","html-type":"submit",loading:e.submit}},[e._v(" 提交 ")])],1)],2)],1)],1)],1)},n=[],i=(r("b64b"),r("b0c0"),r("c24f")),o=r("b775"),s={upload:"/admin/upload"};function u(e){return Object(o["b"])({url:s.upload,method:"post",data:e,headers:{"Content-Type":"multipart/form-data"}})}var l={name:"Add",data:function(){return{loading:!1,submit:!1,satellite:!1,form:[{label:"姓名",prop:"name",type:"input",wrapperCol:12,validate:!0},{label:"图片",prop:"img",type:"upload",wrapperCol:12},{label:"身份证号",prop:"cardId",type:"input",wrapperCol:12},{label:"性别",prop:"sex",type:"radio",wrapperCol:12,option:[{key:"男",value:"男"},{key:"女",value:"女"}],validate:!0},{label:"联系电话",prop:"phone",type:"input",wrapperCol:12,validate:!0},{label:"备用联系电话",prop:"mobile",type:"input",wrapperCol:12},{label:"所属岛",prop:"belong",type:"radio",wrapperCol:12,option:[{key:1,value:"小中坝"},{key:2,value:"大中坝"}],validate:!0},{label:"住址",prop:"address",type:"input",wrapperCol:12}],insertForm:{},insertFormRules:{name:[{required:!0,message:"请输入居民姓名",trigger:"blur"}],phone:[{required:!0,message:"请输入联系电话",trigger:"blur"},{len:11,message:"请输入正确的手机号码",trigger:"blur"}],sex:[{required:!0,message:"请选择性别",trigger:"blur"}],belong:[{required:!0,message:"请选择所属岛",trigger:"blur"}]},edit:!1,imgLoading:!1,imageUrl:""}},mounted:function(){this.getQueryParameter()},methods:{getQueryParameter:function(){var e=this,t=this.$route.query;Object.keys(t).length>0&&(this.loading=!0,Object(i["i"])({id:t.id}).then((function(r){e.insertForm={id:t.id,name:r.data.name,cardId:r.data.id_card,sex:r.data.sex,phone:r.data.phone,mobile:r.data.mobile,address:r.data.address,pin:r.data.pin,img:r.data.img,belong:r.data.belong},e.imageUrl="http://58.87.114.128:8081"+r.data.img,e.edit=!0,e.loading=!1})))},handleSubmit:function(e){var t=this;e.preventDefault(),this.$refs.insert.validate((function(e){e&&(t.submit=!0,t.edit?Object(i["c"])(t.insertForm).then((function(e){e.status?t.$notification.error({message:e.msg}):(t.submit=!1,t.$notification.success({message:"更新成功"}),setTimeout((function(){t.$router.push("/user/list")}),1e3))})):Object(i["a"])(t.insertForm).then((function(e){e.status?t.$notification.error({message:e.msg}):(t.submit=!1,t.$notification.success({message:"新增成功"}),setTimeout((function(){t.$router.push("/user/list")}),1e3))})))}))},customRequest:function(e){var t=this;this.imageUrl="",this.imgLoading=!0;var r=new FormData;r.append("file",e.file),u(r).then((function(e){t.insertForm.img=e.data.path,t.imageUrl="http://58.87.114.128:8081"+e.data.path,t.imgLoading=!1}))}}},p=l,d=(r("c53a"),r("2877")),m=Object(d["a"])(p,a,n,!1,null,"55aff255",null);t["default"]=m.exports},c24f:function(e,t,r){"use strict";r.d(t,"f",(function(){return i})),r.d(t,"a",(function(){return o})),r.d(t,"i",(function(){return s})),r.d(t,"c",(function(){return u})),r.d(t,"b",(function(){return l})),r.d(t,"e",(function(){return p})),r.d(t,"g",(function(){return d})),r.d(t,"d",(function(){return m})),r.d(t,"h",(function(){return c}));var a=r("b775"),n={list:"/admin/user/list",add:"/admin/user/add",info:"/admin/user/info",edit:"/admin/user/edit",delete:"/admin/user/delete",clockList:"/admin/user/clock_list",updatePassword:"/admin/update_password",exportExcel:"/admin/user/export",updateUserStatus:"/admin/user/update_status"};function i(e){return Object(a["b"])({url:n.list,method:"get",params:e})}function o(e){return Object(a["b"])({url:n.add,method:"post",data:e})}function s(e){return Object(a["b"])({url:n.info,method:"get",params:e})}function u(e){return Object(a["b"])({url:n.edit,method:"post",data:e})}function l(e){return Object(a["b"])({url:n.delete,method:"post",data:e})}function p(e){return Object(a["b"])({url:n.clockList,method:"get",params:e})}function d(e){return Object(a["b"])({url:n.updatePassword,method:"post",data:e})}function m(e){return Object(a["b"])({url:n.exportExcel,method:"get",params:e,responseType:"blob"})}function c(e){return Object(a["b"])({url:n.updateUserStatus,method:"post",data:e})}},c53a:function(e,t,r){"use strict";r("9b51")}}]);