(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5107c9fe"],{a26d:function(t,e,r){"use strict";r.r(e);var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("page-header-wrapper",[r("a-card",{attrs:{bordered:!1}},[r("a-spin",{attrs:{spinning:t.loading}},[r("a-form-model",{ref:"insert",attrs:{model:t.insertForm,rules:t.insertFormRules},on:{submit:t.handleSubmit}},[t._l(t.form,(function(e,a){return r("a-form-model-item",{key:a,attrs:{label:e.label,labelCol:{lg:{span:4},sm:{span:7}},wrapperCol:{lg:{span:e.wrapperCol},sm:{span:10}},prop:e.prop}},["input"===e.type?r("a-input",{attrs:{name:e.prop,placeholder:"请输入"+e.label},model:{value:t.insertForm[e.prop],callback:function(r){t.$set(t.insertForm,e.prop,r)},expression:"insertForm[item.prop]"}}):t._e(),"radio"===e.type?r("a-radio-group",{model:{value:t.insertForm[e.prop],callback:function(r){t.$set(t.insertForm,e.prop,r)},expression:"insertForm[item.prop]"}},t._l(e.option,(function(e,a){return r("a-radio-button",{key:a,attrs:{value:e.key}},[t._v(" "+t._s(e.value)+" ")])})),1):t._e(),"upload"===e.type?r("a-upload",{staticClass:"avatar-uploader",attrs:{name:"file","list-type":"picture-card","show-upload-list":!1,customRequest:t.customRequest}},[t.imageUrl?r("img",{attrs:{src:t.imageUrl,alt:"avatar",width:"200"}}):r("div",[r("a-icon",{attrs:{type:t.imgLoading?"loading":"plus"}}),r("div",{staticClass:"ant-upload-text"},[t._v(" Upload ")])],1)]):t._e()],1)})),r("a-form-model-item",{staticStyle:{"text-align":"center"},attrs:{"wrapper-col":{span:24}}},[r("a-button",{attrs:{type:"primary","html-type":"submit",loading:t.submit}},[t._v(" 提交 ")])],1)],2)],1)],1)],1)},n=[],i=(r("b64b"),r("b0c0"),r("c24f")),o=r("b775"),s={upload:"/admin/upload"};function u(t){return Object(o["b"])({url:s.upload,method:"post",data:t,headers:{"Content-Type":"multipart/form-data"}})}var d={name:"Add",data:function(){return{loading:!1,submit:!1,satellite:!1,form:[{label:"姓名",prop:"name",type:"input",wrapperCol:12,validate:!0},{label:"图片",prop:"img",type:"upload",wrapperCol:12},{label:"身份证号",prop:"cardId",type:"input",wrapperCol:12},{label:"性别",prop:"sex",type:"radio",wrapperCol:12,option:[{key:"男",value:"男"},{key:"女",value:"女"}],validate:!0},{label:"联系电话",prop:"phone",type:"input",wrapperCol:12,validate:!0},{label:"备用联系电话",prop:"mobile",type:"input",wrapperCol:12},{label:"住址",prop:"address",type:"input",wrapperCol:12}],insertForm:{},insertFormRules:{name:[{required:!0,message:"请输入居民姓名",trigger:"blur"}],phone:[{required:!0,message:"请输入联系电话",trigger:"blur"}],sex:[{required:!0,message:"请选择性别",trigger:"blur"}]},edit:!1,imgLoading:!1,imageUrl:""}},mounted:function(){this.getQueryParameter()},methods:{getQueryParameter:function(){var t=this,e=this.$route.query;Object.keys(e).length>0&&(this.loading=!0,Object(i["h"])({id:e.id}).then((function(r){t.insertForm={id:e.id,name:r.data.name,cardId:r.data.id_card,sex:r.data.sex,phone:r.data.phone,mobile:r.data.mobile,address:r.data.address,pin:r.data.pin,img:r.data.img},t.imageUrl="http://58.87.114.128:8081"+r.data.img,t.edit=!0,t.loading=!1})))},handleSubmit:function(t){var e=this;t.preventDefault(),this.$refs.insert.validate((function(t){t&&(e.submit=!0,e.edit?Object(i["c"])(e.insertForm).then((function(t){t.status?e.$notification.error({message:t.msg}):(e.submit=!1,e.$notification.success({message:"更新成功"}),setTimeout((function(){e.$router.push("/user/list")}),1e3))})):Object(i["a"])(e.insertForm).then((function(t){t.status?e.$notification.error({message:t.msg}):(e.submit=!1,e.$notification.success({message:"新增成功"}))})))}))},customRequest:function(t){var e=this;this.imageUrl="",this.imgLoading=!0;var r=new FormData;r.append("file",t.file),u(r).then((function(t){e.insertForm.img=t.data.path,e.imageUrl="http://58.87.114.128:8081"+t.data.path,e.imgLoading=!1}))}}},p=d,l=(r("f986"),r("2877")),m=Object(l["a"])(p,a,n,!1,null,"2ecb87f5",null);e["default"]=m.exports},c24f:function(t,e,r){"use strict";r.d(e,"f",(function(){return i})),r.d(e,"a",(function(){return o})),r.d(e,"h",(function(){return s})),r.d(e,"c",(function(){return u})),r.d(e,"b",(function(){return d})),r.d(e,"e",(function(){return p})),r.d(e,"g",(function(){return l})),r.d(e,"d",(function(){return m}));var a=r("b775"),n={list:"/admin/user/list",add:"/admin/user/add",info:"/admin/user/info",edit:"/admin/user/edit",delete:"/admin/user/delete",clockList:"/admin/user/clock_list",updatePassword:"/admin/update_password",exportExcel:"/admin/user/export"};function i(t){return Object(a["b"])({url:n.list,method:"get",params:t})}function o(t){return Object(a["b"])({url:n.add,method:"post",data:t})}function s(t){return Object(a["b"])({url:n.info,method:"get",params:t})}function u(t){return Object(a["b"])({url:n.edit,method:"post",data:t})}function d(t){return Object(a["b"])({url:n.delete,method:"post",data:t})}function p(t){return Object(a["b"])({url:n.clockList,method:"get",params:t})}function l(t){return Object(a["b"])({url:n.updatePassword,method:"post",data:t})}function m(t){return Object(a["b"])({url:n.exportExcel,method:"get",params:t,responseType:"blob"})}},d37f:function(t,e,r){},f986:function(t,e,r){"use strict";r("d37f")}}]);